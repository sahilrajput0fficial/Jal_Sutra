<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&family=Space+Grotesk%3Awght%40400%3B500%3B700" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<title>JAL Sutra - Water Quality Monitoring</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style type="text/tailwindcss">
      :root {
        --primary-color: #1193d4;
        --teal-color: #008080;
        --navy-color: #000080;
        --accent-color: #00f5d4;
        --background-color: #111618;
      }
      body {
        background-color: var(--background-color);
      }
      .glassmorphism {
        background: rgba(28, 35, 39, 0.5);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(40, 51, 57, 0.3);
      }
      .nav-item.active {
        color: var(--accent-color);
        text-shadow: 0 0 8px rgba(0, 245, 212, 0.5);
      }
    </style>
</head>
<body class="bg-[var(--background-color)] text-white">
<div class="relative flex h-auto min-h-screen w-full flex-col dark group/design-root overflow-x-hidden">
<div class="layout-container flex h-full grow flex-col">
<header class="sticky top-0 z-50 flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#283339] px-10 py-4 glassmorphism">
<a href="home.html" class="flex items-center gap-3 text-white">
<svg class="h-8 w-8 text-[var(--primary-color)]" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
<path d="M24 4C25.7818 14.2173 33.7827 22.2182 44 24C33.7827 25.7818 25.7818 33.7827 24 44C22.2182 33.7827 14.2173 25.7818 4 24C14.2173 22.2182 22.2182 14.2173 24 4Z" fill="currentColor"></path>
</svg>
<h1 class="text-white text-2xl font-bold tracking-[-0.015em]">JAL Sutra</h1>
</a>
<nav class="flex items-center gap-8">
<a href="map.html" class="nav-item text-gray-300 hover:text-white transition-colors duration-300 text-base font-medium">Map</a>
<a href="analytics.html" class="nav-item text-gray-300 hover:text-white transition-colors duration-300 text-base font-medium">Analytics</a>
<a href="calculate index.html" class="nav-item text-gray-300 hover:text-white transition-colors duration-300 text-base font-medium">Calculate Index</a>
<a href="login.html" class="nav-item text-gray-300 hover:text-white transition-colors duration-300 text-base font-medium">Scientist Portal</a>
</nav>
</header>
<main class="flex flex-1 justify-center py-10">
<div class="layout-content-container flex flex-col max-w-7xl flex-1">
<h2 class="text-white text-3xl font-bold tracking-[-0.015em] mb-6 text-center">Water Quality Map</h2>
<div class="glassmorphism rounded-2xl p-6 min-h-[600px] relative">
<div id="map" class="w-full h-[550px] rounded-lg"></div>
<!-- Loading overlay -->
<div id="loadingOverlay" class="absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center hidden">
  <div class="text-white text-center">
    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"></div>
    <p>Loading water quality data...</p>
  </div>
</div>
</div>

<!-- Water Quality Data Display Section -->
<div id="dataDisplaySection" class="mt-8 hidden">
  <h3 class="text-2xl font-bold text-white mb-6 text-center">Water Quality Data Analysis</h3>
  
  <!-- Quick Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
    <div class="glassmorphism rounded-lg p-4 text-center">
      <div class="text-2xl font-bold text-[var(--accent-color)]" id="displayTotalSamples">0</div>
      <p class="text-gray-400 text-sm">Samples in Area</p>
    </div>
    <div class="glassmorphism rounded-lg p-4 text-center">
      <div class="text-2xl font-bold" id="displayAvgHardness">0</div>
      <p class="text-gray-400 text-sm">Avg Hardness (mg/L)</p>
    </div>
    <div class="glassmorphism rounded-lg p-4 text-center">
      <div class="text-2xl font-bold" id="displayPollutionIndex">0</div>
      <p class="text-gray-400 text-sm">Pollution Index</p>
    </div>
    <div class="glassmorphism rounded-lg p-4 text-center">
      <div class="text-lg font-bold" id="displayLocation">-</div>
      <p class="text-gray-400 text-sm">Selected Location</p>
    </div>
  </div>
  
  <!-- Detailed Analysis -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Water Hardness Analysis -->
    <div class="glassmorphism rounded-2xl p-6">
      <h4 class="text-xl font-semibold text-[var(--accent-color)] mb-4">Water Hardness Analysis</h4>
      <div id="hardnessContent">
        <div class="mb-4">
          <div class="flex justify-between items-center mb-2">
            <span class="text-gray-300">Average Hardness:</span>
            <span class="text-white font-bold" id="detailedHardness">0 mg/L</span>
          </div>
          <div class="bg-gray-700 rounded-full h-3">
            <div class="bg-gradient-to-r from-blue-500 to-cyan-400 h-3 rounded-full transition-all duration-500" id="hardnessBar" style="width: 0%"></div>
          </div>
        </div>
        
        <div class="grid grid-cols-2 gap-3 text-sm">
          <div class="flex justify-between">
            <span class="text-green-400">Soft:</span>
            <span id="softCount">0</span>
          </div>
          <div class="flex justify-between">
            <span class="text-yellow-400">Mod. Hard:</span>
            <span id="modHardCount">0</span>
          </div>
          <div class="flex justify-between">
            <span class="text-orange-400">Hard:</span>
            <span id="hardCount">0</span>
          </div>
          <div class="flex justify-between">
            <span class="text-red-400">Very Hard:</span>
            <span id="veryHardCount">0</span>
          </div>
        </div>
        
        <div class="mt-4 p-3 bg-gray-800/50 rounded-lg">
          <p class="text-sm text-gray-300">Classification: <span id="hardnessClassification" class="font-semibold">-</span></p>
          <p class="text-xs text-gray-400 mt-1" id="hardnessDescription">Click on the map to analyze water quality data</p>
        </div>
      </div>
    </div>
    
    <!-- Heavy Metal Concentrations -->
    <div class="glassmorphism rounded-2xl p-6">
      <h4 class="text-xl font-semibold text-[var(--accent-color)] mb-4">Heavy Metal Analysis</h4>
      <div id="metalContent">
        <div class="space-y-3">
          <div class="metal-analysis">
            <div class="flex justify-between items-center mb-1">
              <span class="text-gray-300 text-sm">Lead (Pb)</span>
              <span class="text-white font-mono text-sm" id="avgLead">0.000 mg/L</span>
            </div>
            <div class="bg-gray-700 rounded-full h-2">
              <div class="bg-red-400 h-2 rounded-full transition-all duration-500" id="leadBar" style="width: 0%"></div>
            </div>
            <div class="text-xs text-gray-400 mt-1">Standard: 0.010 mg/L | Status: <span id="leadStatus">-</span></div>
          </div>
          
          <div class="metal-analysis">
            <div class="flex justify-between items-center mb-1">
              <span class="text-gray-300 text-sm">Cadmium (Cd)</span>
              <span class="text-white font-mono text-sm" id="avgCadmium">0.000 mg/L</span>
            </div>
            <div class="bg-gray-700 rounded-full h-2">
              <div class="bg-orange-400 h-2 rounded-full transition-all duration-500" id="cadmiumBar" style="width: 0%"></div>
            </div>
            <div class="text-xs text-gray-400 mt-1">Standard: 0.003 mg/L | Status: <span id="cadmiumStatus">-</span></div>
          </div>
          
          <div class="metal-analysis">
            <div class="flex justify-between items-center mb-1">
              <span class="text-gray-300 text-sm">Chromium (Cr)</span>
              <span class="text-white font-mono text-sm" id="avgChromium">0.000 mg/L</span>
            </div>
            <div class="bg-gray-700 rounded-full h-2">
              <div class="bg-yellow-400 h-2 rounded-full transition-all duration-500" id="chromiumBar" style="width: 0%"></div>
            </div>
            <div class="text-xs text-gray-400 mt-1">Standard: 0.050 mg/L | Status: <span id="chromiumStatus">-</span></div>
          </div>
          
          <div class="metal-analysis">
            <div class="flex justify-between items-center mb-1">
              <span class="text-gray-300 text-sm">Arsenic (As)</span>
              <span class="text-white font-mono text-sm" id="avgArsenic">0.000 mg/L</span>
            </div>
            <div class="bg-gray-700 rounded-full h-2">
              <div class="bg-green-400 h-2 rounded-full transition-all duration-500" id="arsenicBar" style="width: 0%"></div>
            </div>
            <div class="text-xs text-gray-400 mt-1">Standard: 0.010 mg/L | Status: <span id="arsenicStatus">-</span></div>
          </div>
          
          <div class="metal-analysis">
            <div class="flex justify-between items-center mb-1">
              <span class="text-gray-300 text-sm">Mercury (Hg)</span>
              <span class="text-white font-mono text-sm" id="avgMercury">0.000 mg/L</span>
            </div>
            <div class="bg-gray-700 rounded-full h-2">
              <div class="bg-blue-400 h-2 rounded-full transition-all duration-500" id="mercuryBar" style="width: 0%"></div>
            </div>
            <div class="text-xs text-gray-400 mt-1">Standard: 0.006 mg/L | Status: <span id="mercuryStatus">-</span></div>
          </div>
        </div>
        
        <div class="mt-4 p-3 bg-gray-800/50 rounded-lg">
          <p class="text-sm text-gray-300">Overall Status: <span id="overallMetalStatus" class="font-semibold">-</span></p>
          <p class="text-xs text-gray-400 mt-1" id="metalDescription">Metal concentration analysis will appear here</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Recent Readings Table -->
  <div id="recentReadingsSection" class="mt-6 glassmorphism rounded-2xl p-6">
    <h4 class="text-xl font-semibold text-[var(--accent-color)] mb-4">Recent Water Quality Readings</h4>
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-gray-600">
            <th class="text-left py-2 text-gray-400">Sample ID</th>
            <th class="text-left py-2 text-gray-400">Location</th>
            <th class="text-left py-2 text-gray-400">Date</th>
            <th class="text-center py-2 text-gray-400">Hardness</th>
            <th class="text-center py-2 text-gray-400">Category</th>
            <th class="text-center py-2 text-gray-400">Coordinates</th>
          </tr>
        </thead>
        <tbody id="readingsTableBody">
          <tr>
            <td colspan="6" class="text-center py-8 text-gray-400">Click on the map to view readings for that area</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  
  <!-- Action Buttons -->
  <div class="mt-6 flex justify-center gap-4">
    <button id="clearSelection" class="px-6 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors">
      Clear Selection
    </button>
    <button id="viewFullModal" class="px-6 py-2 bg-[var(--accent-color)] hover:bg-cyan-400 text-black rounded-lg transition-colors">
      View Detailed Modal
    </button>
  </div>
</div>

<!-- Water Quality Statistics Modal -->
<div id="statsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
  <div class="glassmorphism rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-xl font-bold text-white">Water Quality Statistics</h3>
      <button id="closeModal" class="text-gray-400 hover:text-white text-2xl">&times;</button>
    </div>
    <div id="statsContent" class="text-white">
      <!-- Stats content will be populated here -->
    </div>
  </div>
</div>
</div>
</main>
</div>
<script src="script.js"></script>
</body>
</html>